<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Team Facing Page</title>
     <style>
        html, body, #editor {
          margin: 5px 0;
          padding: 0;
          width: 100%;
          height: 80%;
        }
        .error-output {
            color: red;
        }
        .bottom-sec
        {
            display: flex;
            margin: 5px;
        }
        .output-panel
        {
            border: 1px solid black;
            padding: 20px;
            width: 50%;
            display: flex;
            margin-right: 10px;
        }
        pre
        {
            font-family: Verdana;
            font-size: 16px;
        }
        .input-text
        {
            background-color: #5c5c5c;
            color: white;
            border: 5px solid wheat;
        }
        .input-text:focus
        {
            border-color: red;
        }
        .input-text-label
        {
            color: red;
        }
    </style>

    <script src="https://cdn.socket.io/4.7.5/socket.io.min.js"></script>


    <!-- RequireJS -->
    <!-- Monaco requires a module loader (AMD) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js"></script>

    <script>
        // Monaco loads files in a vs folder, setting the path for Cloudflare to host
        require.config({
          paths: {
            vs: "https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.45.0/min/vs"
          }
        });
    </script>

</head>
<body>
    <h1>Team Facing Page</h1>

    <div id="editor"></div>

    <button onclick="getSubmissionCode()" id="compile" type="submit">Compile</button>

    <div class="bottom-sec">
        <div class="output-panel">
            <pre class="output">{{output}}</pre>
            <pre class="error-output">{{error_output}}</pre>
        </div>
        <div class="input-panel">
            <input type="text" id="input-text" name="input-text" class="input-text"/>
            <br>
            <label for="input-text" class="input-text-label">Give input and press 'Enter'</label>
        </div>
    </div>

    <!-- Add our hello.js file (even if it's in a sub-directory -->
    <script src="{{ url_for('static', filename='hello.js') }}"></script>
    <script src="{{ url_for('static', filename='getSubmissionCode.js') }}"></script>

    <script>
        const socket = io("http://localhost:5000");

        socket.on("connect", function () {
            console.log("Connected");
        });

        socket.on("output", function (line) {
            const out = document.querySelector(".output");
            out.textContent += line;
            console.log("Outputting");
        })

        const textbox = document.querySelector("#input-text");
        textbox.addEventListener("keydown", (event) => {
            if(event.key === "Enter")
            {
                console.log("Getting INPUT");
                socket.emit("input_added", textbox.value)
                textbox.value = "";
            }
        });

        socket.on("process_done", function() {
            console.log("Process finished");
        });

        socket.on("disconnect", function () {
            console.log("Disconnected");
        })
    </script>





</body>
</html>